<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="工业半轴区块链溯源展示平台，全程可视化追踪生产流程">
    <title>工业半轴区块链溯源展示</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: #333;
            line-height: 1.6;
            padding: 15px;
            min-height: 100vh;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
            position: relative;
        }
        
        header::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background: #2ecc71;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1rem;
            max-width: 100%;
            margin: 0 auto;
            padding: 0 10px;
            line-height: 1.5;
        }
        
        .product-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.04);
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            border-left: 4px solid #3498db;
        }
        
        .product-details h2 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.4rem;
        }
        
        .product-details p {
            color: #555;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .product-id {
            font-family: 'Courier New', monospace;
            background: #2c3e50;
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1rem;
            letter-spacing: 0.5px;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            word-break: break-all;
        }
        
        .process-timeline {
            position: relative;
            padding: 15px 0;
        }
        
        .process-timeline::before {
            content: '';
            position: absolute;
            left: 30px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #3498db, #2ecc71);
            border-radius: 2px;
            z-index: 1;
        }
        
        .process-step {
            display: block;
            margin-bottom: 40px;
            position: relative;
            margin-left: 60px;
            z-index: 2;
        }
        
        .step-icon {
            width: 60px;
            height: 60px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            position: absolute;
            left: -75px;
            top: 20px;
            z-index: 3;
            box-shadow: 0 0 0 6px #f8f9fa, 0 3px 10px rgba(0, 0, 0, 0.15);
        }
        
        .step-content {
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
            position: relative;
            z-index: 2;
            border: 1px solid #f0f0f0;
        }
        
        .step-header {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .step-title {
            font-size: 1.3rem;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .step-date {
            background: #ecf0f1;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #7f8c8d;
            font-weight: 500;
            align-self: flex-start;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            margin-top: 5px;
        }
        
        .step-body {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .step-details {
            width: 100%;
        }
        
        .detail-row {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
            gap: 3px;
        }
        
        .detail-label {
            font-weight: 600;
            color: #555;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        
        .detail-value {
            color: #333;
            font-size: 0.95rem;
            word-break: break-word;
        }
        
        .step-image {
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            height: 180px;
            position: relative;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .step-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.3s ease;
        }
        
        .image-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            color: #666;
            font-size: 0.9rem;
            z-index: 1;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px;
            font-size: 0.8rem;
            text-align: center;
            z-index: 2;
        }
        
        .blockchain-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e8f6f3 100%);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2ecc71;
            margin-top: 15px;
        }
        
        .blockchain-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 8px;
        }
        
        .blockchain-icon {
            color: #2ecc71;
            font-size: 1.2rem;
        }
        
        .blockchain-title {
            font-weight: bold;
            color: #27ae60;
            font-size: 1rem;
        }
        
        .blockchain-hash {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.8rem;
            word-break: break-all;
            border: 1px solid #ddd;
            margin-bottom: 8px;
            color: #2c3e50;
            line-height: 1.4;
        }
        
        .blockchain-note {
            font-size: 0.8rem;
            color: #666;
            display: flex;
            align-items: flex-start;
            gap: 6px;
            line-height: 1.4;
        }
        
        /* 步骤颜色 */
        .step-1 .step-icon { background: #e74c3c; }
        .step-2 .step-icon { background: #3498db; }
        .step-3 .step-icon { background: #f39c12; }
        .step-4 .step-icon { background: #9b59b6; }
        .step-5 .step-icon { background: #2ecc71; }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 0.85rem;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 10px;
            color: #3498db;
            font-weight: bold;
            font-size: 1rem;
        }
        
        /* iPad专用全屏样式 */
        @media only screen and (min-width: 768px) and (max-width: 1024px) {
            body {
                padding: 0;
                width: 100vw;
                height: 100vh;
                overflow-x: hidden;
            }
            
            .container {
                max-width: 100%;
                width: 100vw;
                height: 100vh;
                border-radius: 0;
                padding: 30px;
                margin: 0;
                overflow-y: auto;
            }
            
            header {
                padding: 0 0 30px 0;
                margin-bottom: 40px;
            }
            
            h1 {
                font-size: 2.4rem;
                margin-bottom: 15px;
            }
            
            .subtitle {
                font-size: 1.3rem;
                max-width: 80%;
            }
            
            .product-info {
                padding: 30px;
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 50px;
            }
            
            .product-details h2 {
                font-size: 1.8rem;
            }
            
            .product-id {
                font-size: 1.2rem;
                padding: 15px 25px;
            }
            
            .process-timeline::before {
                left: 60px;
            }
            
            .process-step {
                margin-left: 90px;
                margin-bottom: 50px;
            }
            
            .step-icon {
                width: 80px;
                height: 80px;
                font-size: 2rem;
                left: -100px;
                top: 30px;
                box-shadow: 0 0 0 8px #f8f9fa, 0 3px 15px rgba(0, 0, 0, 0.2);
            }
            
            .step-content {
                padding: 30px;
                border-radius: 12px;
            }
            
            .step-header {
                flex-direction: row;
                align-items: center;
                gap: 20px;
                margin-bottom: 25px;
            }
            
            .step-title {
                font-size: 1.8rem;
                flex: 1;
            }
            
            .step-date {
                font-size: 1rem;
                padding: 8px 15px;
            }
            
            .status-badge {
                font-size: 0.9rem;
                padding: 8px 15px;
            }
            
            .step-body {
                flex-direction: column;
            }
            
            .step-details {
                width: 100%;
            }
            
            .step-image {
                width: 100%;
                height: 250px;
                margin-top: 20px;
            }
            
            .detail-row {
                flex-direction: row;
                align-items: center;
                padding: 12px 0;
            }
            
            .detail-label {
                min-width: 150px;
                font-size: 1.1rem;
                margin-right: 15px;
            }
            
            .detail-value {
                font-size: 1.1rem;
                flex: 1;
            }
            
            .blockchain-info {
                padding: 20px;
                margin-top: 25px;
            }
            
            .blockchain-title {
                font-size: 1.2rem;
            }
            
            .blockchain-hash {
                font-size: 0.9rem;
                padding: 15px;
            }
            
            .blockchain-note {
                font-size: 0.9rem;
            }
            
            footer {
                margin-top: 60px;
                padding-top: 30px;
                font-size: 1rem;
            }
            
            .footer-logo {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }
            
            /* 确保所有步骤都统一在左侧，不左右交替 */
            .process-step {
                margin-left: 90px;
            }
            
            .process-timeline::before {
                left: 60px;
            }
        }
        
        /* 手机端优化 */
        @media (max-width: 767px) {
            .container {
                padding: 15px;
                border-radius: 8px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .product-info {
                padding: 15px;
            }
            
            .step-content {
                padding: 15px;
            }
            
            .step-icon {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
                left: -65px;
            }
            
            .process-timeline::before {
                left: 25px;
            }
            
            .process-step {
                margin-left: 50px;
            }
            
            .step-title {
                font-size: 1.1rem;
            }
            
            .step-image {
                height: 150px;
            }
        }
        
        /* 防止文本溢出 */
        .detail-value, .blockchain-hash, .product-id {
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
        }
        
        /* 触摸友好 */
        .step-content, .product-id, .status-badge {
            transition: all 0.2s ease;
        }
        
        .step-content:active {
            transform: scale(0.98);
        }
        
        /* 增强可访问性 */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* 打印样式 */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-industry"></i> 工业半轴区块链溯源全流程</h1>
            <p class="subtitle">全程可视化追踪，基于区块链技术的不可篡改溯源体系</p>
        </header>
        
        <div class="product-info">
            <div class="product-details">
                <h2>工业半轴 - 全程溯源</h2>
            </div>
            <div class="product-id">溯源编号：TRACE-20250815-BC</div>
        </div>
        
        <div class="process-timeline">
            <!-- 步骤1：原材料 -->
            <div class="process-step step-1">
                <div class="step-icon"><i class="fas fa-mountain"></i></div>
                <div class="step-content">
                    <div class="step-header">
                        <h3 class="step-title">原材料采购与检验</h3>
                        <div class="step-date">2025-11-06</div>
                        <span class="status-badge">区块链已验证</span>
                    </div>
                    
                    <div class="step-body">
                        <div class="step-details">
                            <div class="detail-row">
                                <div class="detail-label">供应商：</div>
                                <div class="detail-value">某某钢材股份有限公司</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">材料型号：</div>
                                <div class="detail-value">42CrMoA合金钢</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">采购批次：</div>
                                <div class="detail-value">SM20230815042</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">材料强度：</div>
                                <div class="detail-value">抗拉强度≥1080MPa</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">质检结果：</div>
                                <div class="detail-value">合格，化学成分与机械性能达标</div>
                            </div>
                        </div>
                        
                        <div class="step-image" data-image-id="1">
                            <div class="image-placeholder" id="placeholder-1">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>正在加载图片...</span>
                            </div>
                            <!-- 使用数据属性存储多个备用URL -->
                            <img data-src="Y.webp" 
                                 data-fallback1="https://placehold.co/600x400/f0f0f0/666?text=原材料采购" 
                                 data-fallback2="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAwIiB5PSIyMDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzY2NiI+5LyY5YyW54mI5LqL5Y2V5a+85p2lPC90ZXh0Pjwvc3ZnPg=="
                                 alt="原材料采购与检验" 
                                 loading="lazy">
                            <div class="image-overlay">优质合金钢材原料仓库</div>
                        </div>
                    </div>
                    
                    <div class="blockchain-info">
                        <div class="blockchain-header">
                            <i class="fas fa-link blockchain-icon"></i>
                            <div class="blockchain-title">区块链存证信息</div>
                        </div>
                        <div class="blockchain-hash">
                            0x8f3a1b7c5e9d2f4a6c8b0e5d7f9a2b1c3e6d8f0a4b7c9e1d3f5a7b9c2e4d6f8a0
                        </div>
                        <div class="blockchain-note">
                            <i class="fas fa-shield-alt"></i>
                            原材料信息已永久记录在区块链，包含供应商资质、检验报告与批次信息
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 步骤2：锻造成型 -->
            <div class="process-step step-2">
                <div class="step-icon"><i class="fas fa-fire"></i></div>
                <div class="step-content">
                    <div class="step-header">
                        <h3 class="step-title">锻造成型工艺</h3>
                        <div class="step-date">2025-11-08</div>
                        <span class="status-badge">区块链已验证</span>
                    </div>
                    
                    <div class="step-body">
                        <div class="step-details">
                            <div class="detail-row">
                                <div class="detail-label">生产车间：</div>
                                <div class="detail-value">一车间</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">设备型号：</div>
                                <div class="detail-value">3000T液压锻压机</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">锻造温度：</div>
                                <div class="detail-value">1150°C ± 20°C</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">保温时间：</div>
                                <div class="detail-value">2小时</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">质检结果：</div>
                                <div class="detail-value">合格，无裂纹、折叠等缺陷</div>
                            </div>
                        </div>
                        
                        <div class="step-image" data-image-id="2">
                            <div class="image-placeholder" id="placeholder-2">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>正在加载图片...</span>
                            </div>
                            <!-- 步骤2的图片（二车间）- 这个是能加载的 -->
                            <img data-src="one.jpg" 
                                 data-fallback1="https://placehold.co/600x400/f0f0f0/666?text=锻造成型工艺" 
                                 data-fallback2="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAwIiB5PSIyMDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzY2NiI+55CG5Y+36YGT5a+85p2lPC90ZXh0Pjwvc3ZnPg=="
                                 alt="锻造成型工艺" 
                                 loading="lazy">
                            <div class="image-overlay">3000T液压锻压机正在进行半轴锻造</div>
                        </div>
                    </div>
                    
                    <div class="blockchain-info">
                        <div class="blockchain-header">
                            <i class="fas fa-link blockchain-icon"></i>
                            <div class="blockchain-title">区块链存证信息</div>
                        </div>
                        <div class="blockchain-hash">
                            0x5d9f2c4a8b7e1d3f6a9c0b5e8d2f4a7b1c3e6d9f0a2b4c6e8d1f3a5b7c9e2d4f6
                        </div>
                        <div class="blockchain-note">
                            <i class="fas fa-shield-alt"></i>
                            锻造工艺参数、操作人员与实时监控数据已上链，确保工艺一致性
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 步骤3：精密机加工 -->
            <div class="process-step step-3">
                <div class="step-icon"><i class="fas fa-cogs"></i></div>
                <div class="step-content">
                    <div class="step-header">
                        <h3 class="step-title">精密机加工</h3>
                        <div class="step-date">2025-11-11</div>
                        <span class="status-badge">区块链已验证</span>
                    </div>
                    
                    <div class="step-body">
                        <div class="step-details">
                            <div class="detail-row">
                                <div class="detail-label">加工车间：</div>
                                <div class="detail-value">二车间</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">设备型号：</div>
                                <div class="detail-value">DMG五轴联动加工中心</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">加工精度：</div>
                                <div class="detail-value">IT6级，误差≤0.02mm</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">表面粗糙度：</div>
                                <div class="detail-value">Ra≤1.6μm</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">质检结果：</div>
                                <div class="detail-value">合格，关键尺寸全部正常</div>
                            </div>
                        </div>
                        
                        <div class="step-image" data-image-id="3">
                            <div class="image-placeholder" id="placeholder-3">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>正在加载图片...</span>
                            </div>
                            <!-- 步骤3的图片（二车间）- 这个确定能加载 -->
                            <img data-src="two.webp" 
                                 data-fallback1="two.jpg"
                                 data-fallback2="https://placehold.co/600x400/f0f0f0/666?text=精密机加工" 
                                 data-fallback3="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAwIiB5PSIyMDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzY2NiI+5aSp5aCC5oqV5ouJ5a+85p2lPC90ZXh0Pjwvc3ZnPg=="
                                 alt="精密机加工" 
                                 loading="lazy">
                            <div class="image-overlay">五轴加工中心进行半轴精密加工</div>
                        </div>
                    </div>
                    
                    <div class="blockchain-info">
                        <div class="blockchain-header">
                            <i class="fas fa-link blockchain-icon"></i>
                            <div class="blockchain-title">区块链存证信息</div>
                        </div>
                        <div class="blockchain-hash">
                            0x3b7e9d1f5a8c2e4d6f9a1b3c5e7d0f2a4b6c8e1d3f5a7b9c2e4d6f8a0b2c4e6
                        </div>
                        <div class="blockchain-note">
                            <i class="fas fa-shield-alt"></i>
                            加工参数、刀具信息与在线检测数据实时上链，确保加工质量可追溯
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 步骤4：热处理 -->
            <div class="process-step step-4">
                <div class="step-icon"><i class="fas fa-temperature-high"></i></div>
                <div class="step-content">
                    <div class="step-header">
                        <h3 class="step-title">热处理强化</h3>
                        <div class="step-date">2025-11-15</div>
                        <span class="status-badge">区块链已验证</span>
                    </div>
                    
                    <div class="step-body">
                        <div class="step-details">
                            <div class="detail-row">
                                <div class="detail-label">处理车间：</div>
                                <div class="detail-value">三车间</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">处理工艺：</div>
                                <div class="detail-value">淬火+高温回火</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">表面硬度：</div>
                                <div class="detail-value">HRC 28-32，均匀性达标</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">金相组织：</div>
                                <div class="detail-value">回火索氏体，组织均匀</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">质检结果：</div>
                                <div class="detail-value">合格，力学性能全面达标</div>
                            </div>
                        </div>
                        
                        <div class="step-image" data-image-id="4">
                            <div class="image-placeholder" id="placeholder-4">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>正在加载图片...</span>
                            </div>
                            <img data-src="there.webp" 
                                 data-fallback1="there.jpg" 
                                 data-fallback2="https://placehold.co/600x400/f0f0f0/666?text=热处理强化" 
                                 data-fallback3="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAwIiB5PSIyMDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzY2NiI+55So6I2h5o6i5a+85p2lPC90ZXh0Pjwvc3ZnPg=="
                                 alt="热处理强化" 
                                 loading="lazy">
                            <div class="image-overlay">热处理车间淬火工艺后效果</div>
                        </div>
                    </div>
                    
                    <div class="blockchain-info">
                        <div class="blockchain-header">
                            <i class="fas fa-link blockchain-icon"></i>
                            <div class="blockchain-title">区块链存证信息</div>
                        </div>
                        <div class="blockchain-hash">
                            0x9c2e4d6f8a0b2c4e6d8f1a3b5c7e9d2f4a6c8b0e5d7f9a1b3c5e7d0f2a4b6c8
                        </div>
                        <div class="blockchain-note">
                            <i class="fas fa-shield-alt"></i>
                            热处理工艺曲线、炉温监控与金相检验结果已上链存证
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 步骤5：成品检验 -->
            <div class="process-step step-5">
                <div class="step-icon"><i class="fas fa-truck-loading"></i></div>
                <div class="step-content">
                    <div class="step-header">
                        <h3 class="step-title">成品检验与出库</h3>
                        <div class="step-date">2025-11-18</div>
                        <span class="status-badge">区块链已验证</span>
                    </div>
                    
                    <div class="step-body">
                        <div class="step-details">
                            <div class="detail-row">
                                <div class="detail-label">终端客户：</div>
                                <div class="detail-value">某某机械有限公司</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">最终检验：</div>
                                <div class="detail-value">全面性能测试通过</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">包装方式：</div>
                                <div class="detail-value">防锈油+防水膜+木箱包装</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">出库单号：</div>
                                <div class="detail-value">SF202308300852</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">检验状态：</div>
                                <div class="detail-value">正常</div>
                            </div>
                        </div>
                        
                        <div class="step-image" data-image-id="5">
                            <div class="image-placeholder" id="placeholder-5">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>正在加载图片...</span>
                            </div>
                            <img data-src="four.webp" 
                                 data-fallback1="four.jpg" 
                                 data-fallback2="https://placehold.co/600x400/f0f0f0/666?text=成品检验与出库" 
                                 data-fallback3="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAwIiB5PSIyMDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzY2NiI+5oiQ5a+85p2l5L+u5pS55Y+LLei/nuaOpeWbmzwvdGV4dD48L3N2Zz4="
                                 alt="成品检验与出库" 
                                 loading="lazy">
                            <div class="image-overlay">成品半轴检验合格准备发货</div>
                        </div>
                    </div>
                    
                    <div class="blockchain-info">
                        <div class="blockchain-header">
                            <i class="fas fa-link blockchain-icon"></i>
                            <div class="blockchain-title">区块链存证信息</div>
                        </div>
                        <div class="blockchain-hash">
                            0xe1d3f5a7b9c2e4d6f8a0b2c4e6d9f1a3b5c7e0d2f4a6c8b0e5d7f9a1b3c5e7d0
                        </div>
                        <div class="blockchain-note">
                            <i class="fas fa-shield-alt"></i>
                            最终检验报告、物流信息与客户签收记录已永久存储于区块链
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <div class="footer-logo">
                <i class="fas fa-link"></i>
                <span>工业半轴区块链溯源平台</span>
            </div>
            <p>© 2026 工业半轴全流程区块链溯源系统 | 基于Hyperledger Fabric区块链技术</p>
            <p style="margin-top: 8px; font-size: 0.8rem; color: #95a5a6;">
                所有生产环节数据均已上链存证，确保信息不可篡改，全程可追溯
            </p>
        </footer>
    </div>
    
    <script>
        // 图片加载管理器
        class ImageLoader {
            constructor() {
                this.maxRetries = 3;
                this.retryDelay = 1000;
                this.images = [];
                this.init();
            }
            
            init() {
                console.log('图片加载管理器初始化...');
                this.collectImages();
                this.setupObservers();
                this.precheckImages();
            }
            
            // 收集所有图片
            collectImages() {
                const imageElements = document.querySelectorAll('.step-image img');
                imageElements.forEach((img, index) => {
                    const container = img.closest('.step-image');
                    const placeholder = container.querySelector('.image-placeholder');
                    
                    this.images.push({
                        element: img,
                        container: container,
                        placeholder: placeholder,
                        src: img.getAttribute('data-src'),
                        fallbacks: [
                            img.getAttribute('data-fallback1'),
                            img.getAttribute('data-fallback2'),
                            img.getAttribute('data-fallback3')
                        ].filter(Boolean),
                        retryCount: 0,
                        loaded: false
                    });
                });
                
                console.log(`找到 ${this.images.length} 张图片`);
            }
            
            // 设置观察者（懒加载）
            setupObservers() {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const container = entry.target;
                            const imgData = this.images.find(img => img.container === container);
                            if (imgData && !imgData.loaded) {
                                this.loadImage(imgData);
                            }
                            observer.unobserve(container);
                        }
                    });
                }, {
                    rootMargin: '100px',
                    threshold: 0.1
                });
                
                this.images.forEach(imgData => {
                    observer.observe(imgData.container);
                });
            }
            
            // 预检查图片
            precheckImages() {
                console.log('预检查图片可用性...');
                
                // 特别检查步骤3的图片（two.webp），这个应该是能加载的
                const step3Image = this.images.find(img => img.src === 'two.webp');
                if (step3Image) {
                    console.log('检查步骤3图片 (two.webp)...');
                    this.testImageUrl(step3Image.src).then(success => {
                        console.log(`步骤3图片 (two.webp) 可用性: ${success ? '可用' : '不可用'}`);
                    });
                }
                
                // 立即加载前两张图片（为了更好的用户体验）
                setTimeout(() => {
                    const firstTwoImages = this.images.slice(0, 2);
                    firstTwoImages.forEach(imgData => {
                        if (!imgData.loaded) {
                            this.loadImage(imgData);
                        }
                    });
                }, 500);
            }
            
            // 测试图片URL是否可用
            async testImageUrl(url) {
                return new Promise((resolve) => {
                    if (!url) {
                        resolve(false);
                        return;
                    }
                    
                    const img = new Image();
                    img.onload = () => resolve(true);
                    img.onerror = () => resolve(false);
                    img.src = url;
                    
                    // 设置超时
                    setTimeout(() => resolve(false), 3000);
                });
            }
            
            // 加载图片
            async loadImage(imgData) {
                console.log(`开始加载图片: ${imgData.src}`);
                
                if (imgData.loaded) return;
                
                const sources = [imgData.src, ...imgData.fallbacks];
                let success = false;
                
                for (let i = 0; i < sources.length; i++) {
                    const source = sources[i];
                    if (!source) continue;
                    
                    console.log(`尝试来源 ${i + 1}: ${source.substring(0, 50)}...`);
                    
                    try {
                        success = await this.tryLoadSource(imgData, source);
                        if (success) {
                            imgData.loaded = true;
                            break;
                        }
                    } catch (error) {
                        console.warn(`来源 ${i + 1} 加载失败:`, error);
                    }
                    
                    // 等待一下再尝试下一个来源
                    if (i < sources.length - 1) {
                        await this.sleep(500);
                    }
                }
                
                if (!success) {
                    this.showFinalFallback(imgData);
                }
            }
            
            // 尝试加载一个来源
            tryLoadSource(imgData, src) {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = () => {
                        console.log(`图片加载成功: ${src.substring(0, 50)}...`);
                        imgData.element.src = src;
                        
                        // 隐藏占位符
                        if (imgData.placeholder) {
                            imgData.placeholder.style.opacity = '0';
                            setTimeout(() => {
                                imgData.placeholder.style.display = 'none';
                            }, 300);
                        }
                        
                        resolve(true);
                    };
                    
                    img.onerror = () => {
                        console.warn(`图片加载失败: ${src.substring(0, 50)}...`);
                        resolve(false);
                    };
                    
                    img.src = src;
                    
                    // 设置超时
                    setTimeout(() => {
                        if (!img.complete) {
                            console.warn(`图片加载超时: ${src.substring(0, 50)}...`);
                            resolve(false);
                        }
                    }, 5000);
                });
            }
            
            // 显示最终备用方案
            showFinalFallback(imgData) {
                console.log('使用最终备用方案');
                
                // 创建SVG图片
                const altText = imgData.element.alt || '图片';
                const svg = `
                    <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#f5f5f5"/>
                        <text x="50%" y="45%" text-anchor="middle" font-family="Arial" font-size="16" fill="#666">
                            ${altText}
                        </text>
                        <text x="50%" y="55%" text-anchor="middle" font-family="Arial" font-size="12" fill="#999">
                            图片暂不可用
                        </text>
                    </svg>
                `;
                
                const svgBlob = new Blob([svg], {type: 'image/svg+xml;charset=utf-8'});
                const svgUrl = URL.createObjectURL(svgBlob);
                
                imgData.element.src = svgUrl;
                imgData.loaded = true;
                
                if (imgData.placeholder) {
                    imgData.placeholder.style.display = 'none';
                }
            }
            
            // 睡眠函数
            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            // 强制重试所有失败图片
            retryFailedImages() {
                console.log('重试所有失败图片...');
                this.images.forEach(imgData => {
                    if (!imgData.loaded) {
                        imgData.retryCount = 0;
                        this.loadImage(imgData);
                    }
                });
            }
        }
        
        // 添加简单的交互效果
        document.addEventListener('DOMContentLoaded', function() {
            console.log('工业半轴溯源页面加载完成 - 智能图片加载版');
            
            // 初始化图片加载器
            const imageLoader = new ImageLoader();
            
            // 添加点击反馈
            const stepContents = document.querySelectorAll('.step-content');
            stepContents.forEach(content => {
                content.addEventListener('click', function() {
                    this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.15)';
                    setTimeout(() => {
                        this.style.boxShadow = '';
                    }, 200);
                });
            });
            
            // 图片悬停效果
            const images = document.querySelectorAll('.step-image img');
            images.forEach(img => {
                img.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.03)';
                });
                
                img.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
            
            // 自动调整图片大小以适应屏幕
            function adjustImages() {
                const screenWidth = window.innerWidth;
                images.forEach(img => {
                    const parent = img.parentElement;
                    if (screenWidth < 768) {
                        parent.style.height = '150px';
                        img.style.objectFit = 'cover';
                    } else if (screenWidth >= 768 && screenWidth <= 1024) {
                        // iPad优化
                        parent.style.height = '250px';
                        img.style.objectFit = 'cover';
                    } else {
                        parent.style.height = '200px';
                        img.style.objectFit = 'cover';
                    }
                });
            }
            
            // 初始调整和窗口大小变化时调整
            adjustImages();
            window.addEventListener('resize', adjustImages);
            
            // 添加滚动动画效果
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);
            
            // 观察所有步骤
            document.querySelectorAll('.process-step').forEach(step => {
                step.style.opacity = '0';
                step.style.transform = 'translateY(20px)';
                step.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                observer.observe(step);
            });
            
            // 移动端触摸优化
            if ('ontouchstart' in window) {
                document.body.classList.add('touch-device');
                
                // 防止iOS双击缩放
                let lastTouchEnd = 0;
                document.addEventListener('touchend', function(event) {
                    const now = Date.now();
                    if (now - lastTouchEnd <= 300) {
                        event.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);
            }
            
            // 页面加载完成后的优化
            window.addEventListener('load', function() {
                document.body.classList.add('loaded');
                console.log('页面所有资源已加载完成');
                
                // iPad全屏适配
                if (window.innerWidth >= 768 && window.innerWidth <= 1024) {
                    // 确保全屏显示
                    document.body.style.padding = '0';
                    document.querySelector('.container').style.maxWidth = '100%';
                    document.querySelector('.container').style.width = '100vw';
                    document.querySelector('.container').style.height = '100vh';
                    document.querySelector('.container').style.overflowY = 'auto';
                    
                    // 防止iPad上的左右留白
                    const viewport = document.querySelector('meta[name="viewport"]');
                    if (viewport) {
                        viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover');
                    }
                }
                
                // 添加重试按钮（如果图片加载失败）
                setTimeout(() => {
                    const failedImages = document.querySelectorAll('.step-image img[src*="svg"]');
                    if (failedImages.length > 0) {
                        console.log(`发现 ${failedImages.length} 张图片使用备用方案`);
                        
                        // 可以在这里添加一个重试按钮
                        const retryBtn = document.createElement('button');
                        retryBtn.innerHTML = '<i class="fas fa-redo"></i> 重试图片';
                        retryBtn.style.cssText = `
                            position: fixed;
                            bottom: 20px;
                            right: 20px;
                            padding: 10px 15px;
                            background: #3498db;
                            color: white;
                            border: none;
                            border-radius: 5px;
                            cursor: pointer;
                            z-index: 1000;
                            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                        `;
                        retryBtn.onclick = () => imageLoader.retryFailedImages();
                        document.body.appendChild(retryBtn);
                        
                        // 10秒后自动移除
                        setTimeout(() => {
                            if (retryBtn.parentNode) {
                                retryBtn.parentNode.removeChild(retryBtn);
                            }
                        }, 10000);
                    }
                }, 8000);
            });
            
            // iPad滚动优化
            if ('ontouchstart' in window && window.innerWidth >= 768 && window.innerWidth <= 1024) {
                document.querySelector('.container').style.WebkitOverflowScrolling = 'touch';
            }
        });
    </script>
</body>
</html>
